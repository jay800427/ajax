<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>jQuery</title>
    <link rel="shortcut icon" href="#" type="image/x-icon">
    <link rel="stylesheet" href="style.css">
      <!-------引入jQuery函式庫------->
      <script
  src="https://code.jquery.com/jquery-3.4.1.min.js"
  integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
  crossorigin="anonymous">
      </script>
</head>
<body>
    <h1 class="header">jQuery</h1>
    <div class="title"></div>
    <h4></h4>
    <ul></ul>
    
</body>
</html>
<script>
    /********************************************************
    * 1.api網址  https://kktix.com/events.json
    * 2.選擇$.ajax()、$.get()、$.post()其中一種方式
    * 3.建立回呼函式(call back function)來處理回應時的各項行為
    * 4.建立錯誤處理
    ********************************************************/
     
    //利用$.ajax()方法傳送請求並取得回應
    //  $.ajax(
    //   {
    //     url:'https://kktix.com/events.json',
    //     type:'GET',
    //     success:function(res){
    //       console.log(res)
    //       let title=res.title;
    //     document.querySelector('.title').innerHTML=title;
    //     document.querySelector('H4').innerHTML="更新時間:"+res.updated.substr(0,10);//substr(字串起始,字串的總長度)
        
    //     let data=res.entry;//定義一個值叫data ,res.entry(從res裡面撈出來的這個entry是筆陣列)
    //     let str="";//先定義一個空值
    //     data.forEach(function(event,index){
    //         str=str + `<li><a href="${event.url}">${(index+1)+'. '+event.title}</a> - ${event.content}</li>`;
    //     })
    //     document.querySelector("ul").innerHTML=str;
    //     },
    //     error:function(err){
    //       console.log(err)
    //     },
    //     complete:function(xhr,status){
    //       console.log(status)
    //     }
    //   }
    // )   

    
    //利用$.get()方法傳送請求並取得回應(進階用法)
    $.get("https://kktix.com/events.json",function(res){
        console.log(res)
        let title=res.title;
        $(".title").html(title)
        $("h4").html("更新時間:"+res.updated.substr(0,10))
        let data=res.entry
        data.forEach(function(event,index){
             $("ul").append(`<li><a href="${event.url}">${(index+1)+'. '+event.title}</a> - ${event.content}</li>`);
        })
      })

  </script>